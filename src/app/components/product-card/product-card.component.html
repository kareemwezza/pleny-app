<div class="card">
    <div class="card__header">
        <div class="tag">- {{ product.discountPercentage }}%</div>
        <div class="card-image">
            <img [src]="product.thumbnail" [alt]="product.title"/>
        </div>
    </div>

    <div class="card__content">
        <h3>{{ product.title }}</h3>
        <p class="description">{{ product.description }}</p>

        <div class="product-info">
            <div class="price">
                @if (product.discountPercentage !== 0) {
                    <p class="price__original">
                        <span class="text-bold">{{ originalPrice }}</span>&nbsp;USD
                    </p>
                }
                <p>
                    <span class="text-bold">{{ product.price }}</span>&nbsp;USD
                </p>
            </div>

            <div class="product-details">
                <p>Brand: <span class="text-bold">{{ product.brand }}</span></p>
                <p>Category: <span class="text-bold">{{ product.category }}</span></p>
                <p>In stock: <span class="text-bold">{{ product.stock }}</span></p>
            </div>

            <div class="rating">
                <div class="rating-star">
                    <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="star-{{product.id}}" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop [attr.offset]="productRating" style="stop-color:#F4B000;stop-opacity:1"/>
                                <stop [attr.offset]="0" style="stop-color:#213C53;stop-opacity:0.3"/>
                            </linearGradient>
                        </defs>

                        <path d="M8.20712 0.51239C8.31056 0.302795 8.60944 0.302795 8.71288 0.51239L10.8807 4.90491C10.9218 4.98814 11.0012 5.04583 11.093 5.05918L15.9405 5.76355C16.1718 5.79716 16.2641 6.08141 16.0968 6.24456L12.5891 9.66366C12.5227 9.72844 12.4923 9.82179 12.508 9.91327L13.3361 14.7411C13.3756 14.9715 13.1338 15.1472 12.9269 15.0384L8.59123 12.759C8.50907 12.7158 8.41093 12.7158 8.32877 12.759L3.9931 15.0384C3.78621 15.1472 3.54442 14.9715 3.58393 14.7411L4.41197 9.91327C4.42766 9.82179 4.39733 9.72844 4.33087 9.66366L0.823229 6.24456C0.655857 6.08141 0.748215 5.79716 0.979517 5.76355L5.82695 5.05918C5.9188 5.04583 5.9982 4.98814 6.03928 4.90491L8.20712 0.51239Z"
                              [attr.fill]="'url(#star-' + product.id + ')'"/>
                    </svg>
                </div>
                {{ product.rating }}
                <span>({{ product.reviews.length }})</span>
            </div>

            <div class="card__action">
                <button class="primary-btn" (click)="addToCart()" type="button">Add to Cart</button>
            </div>
        </div>
    </div>
</div>